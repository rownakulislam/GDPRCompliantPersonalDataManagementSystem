{"ast":null,"code":"var _jsxFileName = \"C:\\\\thesis_project_start\\\\Ethereum-DappV2\\\\src\\\\view_log.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { ethers } from 'ethers';\nimport { create } from 'ipfs-http-client';\nimport { BrowserRouter as Router, Route, Routes, Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst client = create({\n  host: '127.0.0.1',\n  port: 5001,\n  protocol: 'http'\n});\nfunction ViewLogComponent() {\n  _s();\n  const [userAddress, setUserAddress] = useState('');\n  const [filelogs, setFileLogs] = useState([]);\n  const CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS;\n  const API_KEY = process.env.REACT_APP_API_KEY;\n  const PRIVATE_KEYA = process.env.REACT_APP_PRIVATE_KEY_A;\n  const PRIVATE_KEY1 = process.env.REACT_APP_PRIVATE_KEY_1;\n  const PRIVATE_KEY2 = process.env.REACT_APP_PRIVATE_KEY_2;\n  const network = 'maticmum';\n  const provider = new ethers.providers.AlchemyProvider(network, API_KEY);\n  const signer = new ethers.Wallet(PRIVATE_KEY1, provider);\n  const contractABI = require('./abis/Temp.json');\n  const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\n  async function fetchLog() {\n    try {\n      const userData = await contract.getUserCid();\n      console.log(userData);\n      let logs = [];\n      for (var i = 0; i < userData.length; i++) {\n        const lastAccessor = await contract.getLastAccessor(userData[i].toString());\n        for (var j = 0; j < lastAccessor.length; j++) {\n          logs.push({\n            cid: userData[i],\n            accessed_by: lastAccessor[j].user,\n            time: lastAccessor[j].time,\n            granted: lastAccessor[j].granted\n          });\n        }\n      }\n      setFileLogs(logs);\n    } catch (error) {\n      console.error('Error fetching file from IPFS:', error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: fetchLog,\n      children: \"Fetch Files Logs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"Go to Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }, this), filelogs.map((file, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"CID: \", file.cid.toString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Accessed_by: \", file.accessed_by.toString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Time: \", file.time.toString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Granted: \", file.granted.toString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n_s(ViewLogComponent, \"88NP11FJ/YNC0aFKFcCT5oXvnt4=\");\n_c = ViewLogComponent;\nexport default ViewLogComponent;\nvar _c;\n$RefreshReg$(_c, \"ViewLogComponent\");","map":{"version":3,"names":["React","useState","ethers","create","BrowserRouter","Router","Route","Routes","Link","jsxDEV","_jsxDEV","client","host","port","protocol","ViewLogComponent","_s","userAddress","setUserAddress","filelogs","setFileLogs","CONTRACT_ADDRESS","process","env","REACT_APP_CONTRACT_ADDRESS","API_KEY","REACT_APP_API_KEY","PRIVATE_KEYA","REACT_APP_PRIVATE_KEY_A","PRIVATE_KEY1","REACT_APP_PRIVATE_KEY_1","PRIVATE_KEY2","REACT_APP_PRIVATE_KEY_2","network","provider","providers","AlchemyProvider","signer","Wallet","contractABI","require","contract","Contract","fetchLog","userData","getUserCid","console","log","logs","i","length","lastAccessor","getLastAccessor","toString","j","push","cid","accessed_by","user","time","granted","error","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","to","map","file","index","_c","$RefreshReg$"],"sources":["C:/thesis_project_start/Ethereum-DappV2/src/view_log.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { ethers } from 'ethers';\r\nimport { create } from 'ipfs-http-client';\r\nimport { BrowserRouter as Router, Route, Routes, Link } from 'react-router-dom';\r\n\r\nconst client = create({\r\n    host: '127.0.0.1',\r\n    port: 5001,\r\n    protocol: 'http',\r\n});\r\n\r\nfunction ViewLogComponent() {\r\n    const [userAddress, setUserAddress] = useState('');\r\n    const [filelogs, setFileLogs] = useState([]);\r\n  \r\n    const CONTRACT_ADDRESS = process.env.REACT_APP_CONTRACT_ADDRESS;  \r\n    const API_KEY = process.env.REACT_APP_API_KEY;\r\n    const PRIVATE_KEYA=process.env.REACT_APP_PRIVATE_KEY_A;\r\n    const PRIVATE_KEY1=process.env.REACT_APP_PRIVATE_KEY_1;\r\n    const PRIVATE_KEY2=process.env.REACT_APP_PRIVATE_KEY_2;\r\n  \r\n  \r\n    const network = 'maticmum';\r\n    const provider = new ethers.providers.AlchemyProvider(network, API_KEY);\r\n    const signer = new ethers.Wallet(PRIVATE_KEY1, provider);\r\n  \r\n    \r\n  \r\n  \r\n    const contractABI = require('./abis/Temp.json');\r\n    const contract = new ethers.Contract(CONTRACT_ADDRESS, contractABI, signer);\r\n  \r\n    async function fetchLog() {\r\n      try {\r\n        const userData=await contract.getUserCid();\r\n        console.log(userData);\r\n        let logs=[];\r\n        for(var i=0;i<userData.length;i++){\r\n          const lastAccessor = await contract.getLastAccessor(userData[i].toString());\r\n          for(var j=0;j<lastAccessor.length;j++){\r\n            logs.push({ cid: userData[i], accessed_by:lastAccessor[j].user, time: lastAccessor[j].time,granted: lastAccessor[j].granted})\r\n          }\r\n      }\r\n      setFileLogs(logs);\r\n      } catch (error) {\r\n        console.error('Error fetching file from IPFS:', error);\r\n      }\r\n    }\r\n    return (\r\n        <div>\r\n          <button onClick={fetchLog}>Fetch Files Logs</button>\r\n          \r\n          <div>\r\n            <Link to=\"/\">Go to Upload</Link>\r\n          </div>\r\n          {filelogs.map((file, index) => (\r\n            <div key={index}>\r\n              <p>CID: {file.cid.toString()}</p>\r\n              <p>Accessed_by: {file.accessed_by.toString()}</p>\r\n              <p>Time: {file.time.toString()}</p>\r\n              <p>Granted: {file.granted.toString()}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    \r\n    export default ViewLogComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}